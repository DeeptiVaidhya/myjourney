<ng-template #preInfo>
	<div class="modal-header">
		<button type="button" class="close pull-right" aria-label="Close" (click)="closeModal(videoRef)">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<div class="text-center p-100">
			<p class="f-18">Before you continue, please take a moment to rate how you are feeling before you complete
				this exercise. Reflecting on how you are feeling before and after an activity can increase your
				mindfulness.</p>
		</div>
		<div class="p-b-40 text-center">
			<button class="btn btn-violet btn-250"
				(click)="openQuestionModal(excerciseModal, 'prerating')">Next</button>
		</div>
	</div>
</ng-template>

<ng-template #postMessage>
	<div class="modal-header">

		<button type="button" class="close pull-right" aria-label="Close" (click)="closeModal(postMessageRef)">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<div class="text-center p-100">
			<p class="h8" *ngIf="prePostDiff == 0">We noticed that there was no change in your mood. Keep practicing!
			</p>
			<p class="f-18" *ngIf="prePostDiff>0">Great job! It looks like your mood has increased.</p>
			<p class="f-18" *ngIf="prePostDiff<0">As you continue to develop your awareness through your practice, it is
				natural to notice both positive and sometimes negative changes. Mindfulness involves acknowledging all
				experiences, and itâ€™s beneficial to be open to this change. It might
				also be helpful to bring up your experience in our weekly group discussion.</p>
		</div>
		<div class="p-b-40 p-t-20 text-center">
			<button class="btn btn-violet btn-250" (click)="closeModal(postMessageRef)">close</button>
		</div>
	</div>
</ng-template>

<ng-template #videoModal>
	<div class="modal-header">
		<button type="button" class="close pull-right" aria-label="Close" (click)="closeModal(videoRef)">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<youtube-player width="100%" height="500" [videoId]="currentSrc" (ready)="savePlayer($event)"
			(change)="onStateChange($event)" [playerVars]="playerVars">
		</youtube-player>
		<div class="p-b-20 p-t-40 text-center">
			<button [disabled]="isCompleted && !video_completed" class="btn btn-violet btn-250"
				(click)="openQuestionModal((level  == 'mood' || level  == 'inquiry')?excerciseModal:closeModal(videoRef))">Done</button>
		</div>
	</div>
</ng-template>

<ng-template #excerciseModal>
	<div class="modal-header">
		<button type="button" class="close pull-right" aria-label="Close" (click)="closeModal(questionRef)">
			<span aria-hidden="true">&times;</span>
		</button>
	</div>
	<div class="modal-body">
		<div class="row">
			<div class="col-md-12">
				<div class="text-center">
					<p class="h8">{{ questions[value]?.question }}</p>
				</div>
				<form autocomplete="off" [formGroup]="questionnireForm">
					<div class="form-group">
						<textarea *ngIf="level == 'inquiry'" type="text" class="form-control" formControlName="response"
							rows="6" [ngModel]="questions[value]?.user_response?.response"
							attr.data-qhoid="{{ questions[value]?.user_response?.id }}"></textarea>
						<ng-container *ngIf="level == 'mood'">
							<div class="text-center">
								<ng-container *ngFor="let mood of moodOption; let i=index">
									<img src="{{ mood }}" class="m-r-15 m-t-40 m-b-30"
										[ngClass]="(selected == moodOption.length-i || (questions[value]?.user_response?.pre_rating == 0 ? questions[value]?.user_response?.post_rating : questions[value]?.user_response?.pre_rating) == moodOption.length-i) ? 'emoji-select' : ''"
										alt="thinking icon" attr.data-qhoid="{{ questions[value]?.user_response?.id }}"
										name="mood"
										(click)="rateMood(moodOption.length-i, ratingType ? videoModal : postMessage)">
								</ng-container>
							</div>
						</ng-container>
					</div>
					<div class="row" *ngIf="level == 'mood'">
						<div class="col-12 text-center m-t-40 m-b-40">
							<span class="m-r-15 h8"
								(click)="nextQuestion(ratingType == 'prerating' ?  videoModal: '', 'mood')">Skip </span>
						</div>
					</div>
					<div class="row" *ngIf="level == 'inquiry'">
						<div class="p-b-20 p-t-40 text-center col-lg-6">
							<button class="btn btn-gray btn-250" (click)="previousQuestion()">Back</button>
						</div>
						<div class="p-b-20 p-t-40 text-center col-lg-6">
							<span class="m-r-15"
								(click)="nextQuestion('', value)">{{ value > 0 ? 'Skip question' : 'Skip exercise' }}</span>
							<button class="btn btn-violet btn-250"
								(click)="nextQuestion()">{{ nextButtonFlag ? 'Next' : 'Done' }}</button>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
</ng-template>